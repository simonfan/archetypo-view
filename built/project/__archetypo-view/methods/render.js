define(["require","exports","module","lodash","q"],function(e,t,n){function s(t){var n=i.defer();console.log(this);var s=this.$el.data("html");if(s)console.log("render async"),e(["text!"+s],r.bind(function(e){this.$el.html(e),n.resolve()},this));else{console.log("render directly");var o=t.html||this.html;o&&this.$el.html(o),n.resolve()}return n.promise}var r=e("lodash"),i=e("q");n.exports=function(t){return console.log("render"),this.renderPromise||(this.renderPromise=s.call(this,t)),this.renderPromise}});