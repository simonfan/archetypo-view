define("__archetypo-view/objects/registry",["require","exports","module","lodash","lowercase-backbone","backbone.model.tree"],function(e,t,i){{var r=(e("lodash"),e("lowercase-backbone"),e("backbone.model.tree"));i.exports=r.extend({idAttribute:"_id",descendantItems:function(e){var t=this.selectDescendants(e);return t.map(function(e){return e.get("item")})}})}}),define("__archetypo-view/functions/tokenize",["require","exports","module","lodash"],function(e,t,i){function r(e){return e.replace(/^-ms-/,"ms-").replace(/-([a-z]|[0-9])/gi,function(e,t){return(t+"").toUpperCase()})}var s=e("lodash"),n=/\s+/;i.exports=function(e){if(!s.isString(e))return[];var t=e.split(n);return s(t).map(r).compact().value()}}),define("__archetypo-view/methods/register",["require","exports","module","lodash","../objects/registry","../functions/tokenize"],function(e,t,i){var r=(e("lodash"),e("../objects/registry")),s=e("../functions/tokenize");i.exports=function(e){e=e||{};var t=this.$el.data()||{};t.builder=e.builder,t.item=this,t["class"]=s(t["class"]),this.ancestor=e.ancestor||!1,this.registry=this.ancestor?this.ancestor.registry.addBranch(t):new r(t)}}),define("__archetypo-view/methods/render",["require","exports","module","lodash","q"],function(e,t,i){function r(t){var i=n.defer(),r=this.$el.data("html");if(r)e(["text!"+r],s.bind(function(e){this.$el.html(e),i.resolve()},this));else{var o=t.html||this.html;o&&this.$el.html(o),i.resolve()}return i.promise}var s=e("lodash"),n=e("q");i.exports=function(e){return this.renderPromise||(this.renderPromise=r.call(this,e)),this.renderPromise}}),define("__archetypo-view/methods/build-sub-views",["require","exports","module","lodash","jquery","../functions/tokenize"],function(e,t,i){function r(e,t){var i=n(t),r=o(i.data("builder"));s.each(r,function(t){if(!i.data("instantiated_"+t)){var r=e.builder(t),s={el:i,ancestor:this,app:e,builder:t};r(s),i.data("instantiated_"+t,!0)}},this)}var s=e("lodash"),n=e("jquery"),o=e("../functions/tokenize");i.exports=function(e){var t=e.app,i=this.$el.find("[data-builder]");s.each(i,function(e){r.call(this,t,e)},this)}}),define("archetypo-view",["require","exports","module","lodash","lowercase-backbone","q","./__archetypo-view/methods/register","./__archetypo-view/methods/render","./__archetypo-view/methods/build-sub-views"],function(e,t,i){var r=e("lodash"),s=e("lowercase-backbone"),n=e("q");i.exports=s.view.extend({initialize:function(e){s.view.prototype.initialize.call(this,e),this.initializeArchetypoView(e)},initializeArchetypoView:function(e){e=e||{},this.app=e.app;var t=this.render(e);this.register(e),n.isPromise(t)?t.then(r.partial(r.bind(this.build,this),e)):this.build(e)},register:e("./__archetypo-view/methods/register"),render:e("./__archetypo-view/methods/render"),build:e("./__archetypo-view/methods/build-sub-views"),subviews:function(e){return r.isString(e)?this.registry.descendantItems({id:e}).take(1).toArray()[0]:this.registry.descendantItems(e)}})});